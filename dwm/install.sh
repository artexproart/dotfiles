#!/bin/bash
set -e

echo "üî® –£—Å—Ç–∞–Ω–æ–≤–∫–∞ DWM 6.5 —Å –ø–∞—Ç—á–∞–º–∏ systray –∏ autostart..."

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–∞—Ç–∞–ª–æ–≥ —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏
cd "$(dirname "$0")/src/dwm-6.5"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è config.h
if [ ! -f config.h ]; then
    echo "‚ùå –§–∞–π–ª config.h –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    exit 1
fi

# –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–±–æ—Ä–∫–∏
make clean

# –°–±–æ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo make install

echo "‚úÖ DWM —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ /usr/local/bin/dwm"
echo "üí° –î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ X-—Å–µ—Å—Å–∏—é"
echo "üîß –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 'sudo systemctl restart gdm' –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ—Å—å"
